<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.q.reminder.reminder.mapper.UserInfoMapping">

    <select id="userInfo" resultType="com.q.reminder.reminder.vo.UserInfoVo">
        SELECT
            u.username,
            p.p_key AS pKey
        FROM
            s_user u
            LEFT JOIN s_user_p sp ON u.id = sp.user_id
            LEFT JOIN r_project_info p ON sp.p_id = p.p_id
        WHERE
            p.is_delete = 0
          AND u.`enable` = 0
          AND u.username = #{username}
        limit 1
    </select>

</mapper>